(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{3188:function(e,r,n){"use strict";n.d(r,{O:function(){return Q}});var t=n(5893),o=n(4096),s=n(8017),c=n(9249),a=(n(733),n(2026)),i=n(9444),l=n(8482),u=n(4115),d=n(4232),x=n(6185),p=n(2460),b=n(969),f=n(5063),h=n(1163);function m(e){var r,n=e.back,c=(0,h.useRouter)(),m="0x000";null!==(r=c.query)&&void 0!==r&&r.token&&(m=c.query.token.toLowerCase());var j=(0,p.Q)(),g=j.accounts,y=j.inList,k=j.myTokenBalance,v=j.tokenSymbol,w=j.tokens,O=g?"".concat(g[0].substr(0,5),"...").concat(g[0].substr(-5)):"0x000...0000";return(0,t.jsx)(s.xu,{bg:"cyan.800",width:"100%",align:"center",children:(0,t.jsxs)(o.k,{justify:"space-between",py:"15",align:"center",maxW:1100,px:"10",children:[(0,t.jsxs)(a.Ug,{spacing:"1",children:[n&&(0,t.jsx)(f.default,{href:"/",children:(0,t.jsxs)(i.r,{ml:"-7",children:[" ",(0,t.jsx)(l.E,{size:"25px",as:b.YFh})]})}),(0,t.jsxs)(u.x,{fontSize:"34",fontWeight:"bold",children:[v," Token Sale"]})]}),(0,t.jsxs)(d.v2,{children:[(0,t.jsx)(d.j2,{colorScheme:"cyan",as:x.z,rightIcon:(0,t.jsx)(b.bTu,{}),children:(0,t.jsx)(u.x,{fontSize:"15",children:O})}),(0,t.jsxs)(d.qy,{color:"gray.600",align:"flex",children:[(0,t.jsx)(s.xu,{align:"start",ml:"4",children:y?(0,t.jsx)(u.x,{fontWeight:"bold",color:"green.500",children:"In the Club"}):(0,t.jsx)(u.x,{fontWeight:"bold",color:"red.500",children:"Not in the Club"})}),(0,t.jsxs)(s.xu,{ml:"4",align:"start",children:[(0,t.jsx)("b",{children:"Balance"}),": ",k," ",v]}),w.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.R,{}),(0,t.jsx)(d.kS,{title:"Tokens",align:"start",children:w.map((function(e){return(0,t.jsx)(d.sN,{isDisabled:m===e.address.toLowerCase(),children:(0,t.jsx)(f.default,{href:"/".concat(e.address),children:(0,t.jsx)(i.r,{as:"span",_hover:{textDecoration:"none"},children:(0,t.jsxs)(u.x,{fontSize:"small",children:["- ",e.symbol]})})})},e.address)}))})]})]})]})]})})}function j(){var e=(0,p.Q)(),r=e.isOwner,n=e.inList,o="Hello Traveler";return r?o="Hello Owner \\o/":n&&(o="Hello Traveler your are in the club!"),(0,t.jsx)(u.x,{mx:"10",fontWeight:"bold",color:"yellowgreen",children:o})}var g=n(6265),y=n(809),k=n.n(y),v=n(2447),w=n(3637),O=n(2283);function S(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function C(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?S(Object(n),!0).forEach((function(r){(0,g.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function z(){var e=(0,p.Q)(),r=e.kycContract,n=e.isOwner,o=e.accounts,i=e.inList,l=(e.setInList,e.clubRate),d=(0,O.cI)(),b=d.register,f=d.handleSubmit,h=function(){var e=(0,v.Z)(k().mark((function e(t){var s,a,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!o){e.next=25;break}return s=t||o[0],e.prev=2,e.next=5,r.kycCompleted(s);case 5:if(a=e.sent,i="".concat(s.substr(1,4),"...").concat(s.substr(-4)),!a){e.next=11;break}c.Am.warning("".concat(i," is already in the list")),e.next=19;break;case 11:if(!n){e.next=16;break}return e.next=14,r.setKycCompleted(s);case 14:e.next=18;break;case 16:return e.next=18,r.buyKyc({value:l});case 18:c.Am.info("Transaction sent, waiting confirmation to join the club");case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(2),c.Am.error("Error to process this address or you are not allowed"),console.error("Error to process this address or you are not allowed`",e.t0);case 25:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(r){return e.apply(this,arguments)}}(),m=function(){var e=(0,v.Z)(k().mark((function e(r){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(r.kycAddress);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),j=function(){var e=(0,v.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&h(o[0]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g="Join the club to be able to buy tokens!";return n&&(g="You are not in the club!"),(0,t.jsxs)(s.xu,{mx:"5",maxW:"500px",backgroundColor:"gray.800",borderRadius:"10",p:"5",children:[(0,t.jsx)(u.x,{mx:"5",fontWeight:"bold",color:"cyan.400",children:"Club"}),(0,t.jsxs)(a.gC,{mx:"5",spacing:"5",fontSize:"25",align:"flex-start",children:[!i&&(0,t.jsxs)(a.gC,{align:"flex-start",as:"form",onSubmit:f(j),spacing:"2",children:[(0,t.jsx)(u.x,{children:g}),(0,t.jsx)(x.z,{size:"lg",colorScheme:"blackAlpha",type:"submit",children:"Join Club"}),!n&&(0,t.jsxs)(u.x,{fontSize:"12",color:"red.300",children:[" * Only ",l," wei "]})]}),!n&&!i&&(0,t.jsx)(u.x,{children:"You can also contact the owner to try to get in for free"}),n&&(0,t.jsxs)(a.gC,{align:"flex-start",spacing:"3",as:"form",onSubmit:f(m),children:[(0,t.jsx)(u.x,{children:"Add your friends to the club"}),(0,t.jsx)(w.I,C(C({},b("kycAddress")),{},{label:"KYC Address",type:"text"})),(0,t.jsx)(x.z,{mt:"3",size:"lg",colorScheme:"blackAlpha",type:"submit",children:"Add address"})]})]})]})}var T=n(2593),P=n(7616);function E(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function A(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?E(Object(n),!0).forEach((function(r){(0,g.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function D(){var e=(0,p.Q)(),r=e.currentSupply,n=e.tokenSymbol,o=e.accounts,i=e.tokenRate,l=e.myTokenSaleContract,d=e.myTokenContract,b=(0,O.cI)(),f=b.register,h=b.handleSubmit,m=function(){var e=(0,v.Z)(k().mark((function e(r){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.tokens>0&&o&&l)){e.next=13;break}return n=T.O$.from(i).mul(T.O$.from(r.tokens)),console.log("TOTALValue",n.toNumber()),e.prev=3,e.next=6,l.buyTokens(o[0],{value:n.toNumber()});case 6:c.Am.info("Transaction sent, balance will updated once confirmed"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),c.Am.error("Error sending transaction"),console.error("Error sending transaction",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(r){return e.apply(this,arguments)}}(),j=function(){var e=(0,v.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=3;break}return e.next=3,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:d.address,symbol:n,decimals:0}}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,t.jsxs)(s.xu,{mx:"5",maxW:"500px",backgroundColor:"gray.800",borderRadius:"10",p:"5",children:[(0,t.jsxs)(u.x,{mx:"5",fontWeight:"bold",color:"cyan.400",children:["Token ",n]}),(0,t.jsxs)(a.gC,{mx:"5",fontSize:"25",spacing:"5",align:"flex-start",children:[(0,t.jsxs)(u.x,{mt:"4",color:"yellowgreen",children:["Current Token Supply ",r]}),(0,t.jsxs)(a.gC,{as:"form",onSubmit:h(m),spacing:"2",align:"flex-start",children:[(0,t.jsx)(u.x,{children:"How many tokens you want to buy?"}),(0,t.jsx)(w.I,A(A({},f("tokens")),{},{defaultValue:"5",label:"amount",type:"number"})),(0,t.jsx)(x.z,{size:"lg",colorScheme:"blackAlpha",type:"submit",children:"Buy Tokens"}),(0,t.jsxs)(u.x,{fontSize:"12",color:"red.300",children:[" * Only ",P.dF(i)," ETH each"]})]}),(0,t.jsx)(u.x,{children:"You can also send weis to the following address to obtain tokens"}),(0,t.jsxs)(u.x,{fontSize:"14",color:"red.300",children:["Token value in ETH: ",P.bM(i,"ether")]}),(0,t.jsxs)(u.x,{fontSize:"14",color:"green.300",children:["Address to send wei: ",l&&l.address]}),(0,t.jsxs)(x.z,{colorScheme:"orange",onClick:function(){return j()},children:["Add ",n," to Metamask"]})]})]})}function I(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function R(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?I(Object(n),!0).forEach((function(r){(0,g.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function W(){var e=(0,p.Q)(),r=e.tokenSymbol,n=e.accounts,o=e.myTokenContract,i=e.myTokenSaleContract,l=(0,O.cI)(),d=l.register,b=l.handleSubmit,f=function(){var e=(0,v.Z)(k().mark((function e(r){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.tokens>0&&n&&o&&i)){e.next=11;break}return e.prev=1,e.next=4,o.mint(n[0],r.tokens);case 4:c.Am.info("Transaction sent, token will be minted once confirmed"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),c.Am.error("Error on token mint"),console.error("Error on token mint",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(r){return e.apply(this,arguments)}}();return(0,t.jsx)(s.xu,{mx:"5",maxW:"500px",backgroundColor:"gray.800",borderRadius:"10",p:"5",children:(0,t.jsxs)(a.gC,{mx:"5",fontWeight:"bold",spacing:"5",align:"flex-start",children:[(0,t.jsxs)(u.x,{children:["Mint ",r," Token!"]}),(0,t.jsxs)(a.gC,{as:"form",onSubmit:b(f),spacing:"2",align:"flex-start",children:[(0,t.jsx)(w.I,R(R({},d("tokens")),{},{defaultValue:"5",label:"amount",type:"number"})),(0,t.jsx)(x.z,{size:"lg",colorScheme:"blackAlpha",type:"submit",children:"Mint Tokens"})]})]})})}var q=n(829),N=n(7294);function Z(e){var r=e.message,n=e.error,o=void 0!==n&&n,i=o&&!0===o?"red.400":"blue.400";return(0,t.jsx)(s.xu,{mx:"5",maxW:"500px",backgroundColor:"gray.800",borderRadius:"10",p:"5",children:(0,t.jsxs)(a.Ug,{spacing:"2",align:"center",justify:"center",m:"10",p:"10",children:[(0,t.jsx)(u.x,{fontSize:"42",color:i,children:r}),!o&&(0,t.jsx)(q.$,{size:"lg"}),(0,t.jsx)(c.Ix,{})]})})}function H(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function _(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?H(Object(n),!0).forEach((function(r){(0,g.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function L(){(0,h.useRouter)();var e=(0,p.Q)(),r=e.accounts,n=e.userTokenContract,o=(0,O.cI)(),i=o.register,l=o.handleSubmit,d=o.formState.errors,b=function(){var e=(0,v.Z)(k().mark((function e(t){var o,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),console.log(P.fi(t.value).toNumber()),console.log("ERROS",d),!r||!n){e.next=22;break}if(o=P.fi(String(t.value)),s=P.fi(String(t.club_price)),!(o.toNumber()<=0)){e.next=9;break}return c.Am.error("Initial token price cannot less or equal to zero"),e.abrupt("return");case 9:if(!(s.toNumber()<0)){e.next=12;break}return c.Am.error("Club price cannot be negative"),e.abrupt("return");case 12:return e.prev=12,e.next=15,n.createToken(t.name,t.symbol,t.decimals,o.toNumber(),s.toNumber());case 15:c.Am.info("Transaction sent, token will be created once confirmed"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(12),c.Am.error("Error on token creation"),console.error("Error on token creation",e.t0);case 22:case"end":return e.stop()}}),e,null,[[12,18]])})));return function(r){return e.apply(this,arguments)}}();return(0,t.jsx)(s.xu,{mx:"5",maxW:"500px",backgroundColor:"gray.800",borderRadius:"10",p:"5",children:(0,t.jsxs)(a.gC,{mx:"5",spacing:"5",align:"flex-start",children:[(0,t.jsx)(u.x,{fontWeight:"bold",color:"cyan.400",children:"Create your own Token!"}),(0,t.jsxs)(a.gC,{fontSize:"25",mx:"10",as:"form",onSubmit:l(b),spacing:"2",align:"flex-start",children:[(0,t.jsx)(u.x,{children:"Name (Up to 15 characters)"}),(0,t.jsx)(w.I,_(_({},i("name",{pattern:/^[a-z][a-z0-9_ ]{2,17}$/i,required:!0})),{},{label:"Name",type:"text"})),d.name&&(0,t.jsx)(u.x,{color:"red.300",fontSize:"15",children:"Require a name with 3 to 15 characters"}),(0,t.jsx)(u.x,{children:"Symbol(Up to 6 characters)"}),(0,t.jsx)(w.I,_(_({},i("symbol",{pattern:/^[a-z][a-z0-9_]{2,5}$/i,required:!0})),{},{label:"symbol",type:"text"})),d.symbol&&(0,t.jsx)(u.x,{color:"red.300",fontSize:"15",children:"Require a symbol with 3 to 6 characters"}),(0,t.jsx)(u.x,{children:"Decimals (divisible)"}),(0,t.jsx)(w.I,_(_({},i("decimals",{min:0,max:18,required:!0})),{},{defaultValue:"18",label:"decimals",type:"number"})),d.decimals&&(0,t.jsx)(u.x,{color:"red.300",fontSize:"15",children:"Select a value between 0 and 18"}),(0,t.jsx)(u.x,{children:"Token sale value in ETH"}),(0,t.jsx)(w.I,_(_({},i("value",{pattern:/^\d+([.]\d{1,18})?$/,required:!0})),{},{defaultValue:"0.000000000000000001",placeholder:"0.000000000000000001",label:"Sale value in ETH",type:"text"})),d.value&&(0,t.jsx)(u.x,{color:"red.300",fontSize:"15",children:"Select a value bigger than 0.000000000000000001  for token price"}),(0,t.jsx)(u.x,{children:"Club Price in ETH"}),(0,t.jsx)(w.I,_(_({},i("club_price",{pattern:/^\d+([.]\d{1,18})?$/,required:!0})),{},{defaultValue:"0.000000000000000001",placeholder:"0.000000000000000001",label:"Sale value in ETH",type:"text"})),d.value&&(0,t.jsx)(u.x,{color:"red.300",fontSize:"15",children:"Select a value bigger than 0.000000000000000001 for club price"}),(0,t.jsx)(x.z,{size:"lg",colorScheme:"cyan",type:"submit",children:"Create my Token"})]})]})})}function Q(e){var r=e.isUserToken,n=void 0!==r&&r,a=(0,h.useRouter)(),i=(0,p.Q)(),l=i.isOwner,u=i.loaded,d=i.loadedOk,x=i.inList,b=i.setUserTokenAddress;return(0,N.useEffect)((function(){var e;n?null!==(e=a.query)&&void 0!==e&&e.token&&b(a.query.token):b(void 0)})),u?d?(0,t.jsxs)(o.k,{w:"100%",h:"100vh",mh:"auto",direction:"column",align:"center",children:[(0,t.jsx)(m,{back:n}),(0,t.jsx)(s.xu,{maxW:1100,w:"100%",fontSize:"34",m:"5",align:"flex-start",children:(0,t.jsx)(j,{})}),(0,t.jsxs)(o.k,{pb:"100",wrap:"wrap",gridGap:"12",maxW:1100,w:"100%",fontSize:"34",m:"5",spacing:"10",justify:"space-between",align:"flex-start",children:[!n&&(0,t.jsx)(L,{}),x&&(0,t.jsx)(D,{}),(!x||l)&&(0,t.jsx)(z,{}),l&&x&&(0,t.jsx)(W,{})]}),(0,t.jsx)(c.Ix,{})]}):(0,t.jsx)(Z,{message:"Error loading dApp",error:!0}):(0,t.jsx)(Z,{message:"Loading web3..."})}}}]);